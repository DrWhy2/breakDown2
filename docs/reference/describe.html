<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generates Textual Explanations for Predictive Models — describe • iBreakDown</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../dalexverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../dalexverse-2.css" rel="stylesheet">
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Generates Textual Explanations for Predictive Models — describe" />

<meta property="og:description" content="Generic function describe generates natural language explanations based on
break_down and shap explanations, what enhances their interpretability." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14""></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">iBreakDown</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">1.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette_iBreakDown_classification.html">iBreakDown plots for classification models</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_description.html">Explanations in natural language</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_regression.html">iBreakDown plots for regression models</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_titanic.html">General introduction: iBreakDown plots for Sinking of the RMS Titanic</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/iBreakDown">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates Textual Explanations for Predictive Models</h1>
    <small class="dont-index">Source: <a href='https://github.com/ModelOriented/iBreakDown/blob/master/R/describe_breakdown.R'><code>R/describe_breakdown.R</code></a>, <a href='https://github.com/ModelOriented/iBreakDown/blob/master/R/describe_shap.R'><code>R/describe_shap.R</code></a></small>
    <div class="hidden name"><code>describe.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Generic function <code>describe</code> generates natural language explanations based on
<code><a href='break_down.html'>break_down</a></code> and <code><a href='break_down_uncertainty.html'>shap</a></code> explanations, what enhances their interpretability.</p>
    
    </div>

    <pre class="usage"><span class='fu'>describe</span>(<span class='no'>x</span>, <span class='kw'>nonsignificance_treshold</span> <span class='kw'>=</span> <span class='fl'>0.15</span>, <span class='no'>...</span>)

<span class='co'># S3 method for break_down</span>
<span class='fu'>describe</span>(
  <span class='no'>x</span>,
  <span class='kw'>nonsignificance_treshold</span> <span class='kw'>=</span> <span class='fl'>0.15</span>,
  <span class='no'>...</span>,
  <span class='kw'>label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_description</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_values</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_distribution_details</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_shap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='co'># S3 method for break_down_uncertainty</span>
<span class='fu'>describe</span>(
  <span class='no'>x</span>,
  <span class='kw'>nonsignificance_treshold</span> <span class='kw'>=</span> <span class='fl'>0.15</span>,
  <span class='no'>...</span>,
  <span class='kw'>label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_description</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_values</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_distribution_details</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_shap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an explanation created with <code><a href='break_down.html'>break_down</a></code> or <code><a href='break_down_uncertainty.html'>shap</a></code></p></td>
    </tr>
    <tr>
      <th>nonsignificance_treshold</th>
      <td><p>a numeric specifying a treshold for variable importance</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>a character string describing model's prediction</p></td>
    </tr>
    <tr>
      <th>short_description</th>
      <td><p>a boolean, returns a short description</p></td>
    </tr>
    <tr>
      <th>display_values</th>
      <td><p>a boolean, displays variables' values</p></td>
    </tr>
    <tr>
      <th>display_numbers</th>
      <td><p>a boolean, displays a description containing numerical values</p></td>
    </tr>
    <tr>
      <th>display_distribution_details</th>
      <td><p>a boolean, displays details about the distribution of model's predictions</p></td>
    </tr>
    <tr>
      <th>display_shap</th>
      <td><p>a boolean, adds information about variables' average contribution. Use only with <code><a href='break_down_uncertainty.html'>shap</a></code> explanation.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A character string of textual explanation</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Function <code>describe</code> generates a textual explanations by extracting information from
a <code><a href='break_down.html'>break_down</a></code> or <code><a href='break_down_uncertainty.html'>shap</a></code> explanation. It makes an argument justifying why
the model's prediction is lower or higher, than it's average prediction. The description consists of
an introduction, argumenation and summary making use from the claim, support, evidence argumentation
structure, as recomended for the World Universities Debating style.</p>
<p>The function first selects one of four different scenarios, due to
<code>nonsignificance_treshold</code>. The chosen scenario can be one of the following:
1. Model's prediction for the selected instance is significantly higher than the average prediction.
2. Model's prediction is significantly lower.
3. Model's prediction is close to it's average prediction, however there are significant
variables counteracting with each other
4. Model's prediction is close to it's average prediction and all the variables are rather nonsignificant.
Then an explanation due to the chosen scenario is generated.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"DALEX"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"randomForest"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"iBreakDown"</span>)

<span class='no'>titanic</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span>(<span class='no'>titanic</span>)
<span class='no'>model_titanic_rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/randomForest.html'>randomForest</a></span>(<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span> ~ <span class='no'>gender</span> + <span class='no'>age</span> + <span class='no'>class</span> + <span class='no'>embarked</span> +
                                  <span class='no'>fare</span> + <span class='no'>sibsp</span> + <span class='no'>parch</span>,  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: The response has five or fewer unique values.  Are you sure you want to do regression?</span></div><div class='input'>
<span class='no'>explain_titanic_rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>model_titanic_rf</span>,
                              <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>[ ,-<span class='fl'>9</span>],
                              <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>titanic</span>$<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span>,
                              <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"Random Forest v7"</span>)</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  Random Forest v7 
#&gt;   -&gt; data              :  2099  rows  8  cols 
#&gt;   -&gt; target variable   :  2099  values 
#&gt;   -&gt; model_info        :  package randomForest , ver. 4.6.14 , task regression ( <span style='color: #BBBB00;'> default </span><span> ) 
#&gt;   -&gt; predict function  :  yhat.randomForest  will be used ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; predicted values  :  numerical, min =  0.009336143 , mean =  0.3241657 , max =  0.9938348  
#&gt;   -&gt; residual function :  difference between y and yhat ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; residuals         :  numerical, min =  -0.7984406 , mean =  0.0002744759 , max =  0.8964633  
#&gt;  </span><span style='color: #00BB00;'> A new explainer has been created! </span><span> </div><div class='input'>
<span class='no'>bd_explanation</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='break_down.html'>break_down</a></span>(<span class='no'>explain_titanic_rf</span>, <span class='no'>titanic</span>[<span class='fl'>1</span>, ], <span class='kw'>keep_distributions</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>bd_explanation</span>)</div><div class='img'><img src='describe-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='no'>description</span> <span class='kw'>&lt;-</span> <span class='fu'>describe</span>(<span class='no'>bd_explanation</span>,
                        <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"the passanger will survive with probability"</span>,
                        <span class='kw'>short_description</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                        <span class='kw'>display_values</span> <span class='kw'>=</span>  <span class='fl'>TRUE</span>,
                        <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                        <span class='kw'>display_distribution_details</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='no'>description</span></div><div class='output co'>#&gt; Random Forest v7 predicts, that the passanger will survive with probability 0.091 which is lower than the average model prediction 0.324. For the selected instance model's prediction is lower, than for 89% of all observations.
#&gt; 
#&gt; The most important variable is gender (= male). It decreases the prediction by 0.104.
#&gt; The second most important variable is age (= 42). It decreases the prediction by 0.049.
#&gt; The third most important variable is class (= 3rd). It decreases the prediction by 0.041.
#&gt; 
#&gt; Other variables are with less importance. The contribution of all other variables is -0.039. </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"DALEX"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"iBreakDown"</span>)
<span class='no'>titanic</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span>(<span class='no'>titanic</span>)
<span class='no'>model_titanic_glm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span>(<span class='no'>titanic</span>$<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span> ~ <span class='no'>age</span> + <span class='no'>gender</span> + <span class='no'>class</span> + <span class='no'>fare</span> + <span class='no'>sibsp</span>,
                         <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>[ ,-<span class='fl'>9</span>], <span class='kw'>family</span> <span class='kw'>=</span> <span class='st'>"binomial"</span>)
<span class='no'>explain_titanic_glm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>model_titanic_glm</span>,
                              <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>[,-<span class='fl'>9</span>],
                              <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>titanic</span>$<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span>,
                              <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"glm"</span>)</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  glm 
#&gt;   -&gt; data              :  2099  rows  8  cols 
#&gt;   -&gt; target variable   :  2099  values 
#&gt;   -&gt; model_info        :  package stats , ver. 3.6.0 , task regression ( </span><span style='color: #BBBB00;'> default </span><span> ) 
#&gt;   -&gt; predict function  :  yhat.glm  will be used ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; predicted values  :  numerical, min =  0.009479803 , mean =  0.3244402 , max =  0.9742069  
#&gt;   -&gt; residual function :  difference between y and yhat ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; residuals         :  numerical, min =  -0.9742069 , mean =  -2.864554e-10 , max =  0.9662286  
#&gt;  </span><span style='color: #00BB00;'> A new explainer has been created! </span><span> </div><div class='input'><span class='no'>passanger</span> <span class='kw'>&lt;-</span> <span class='no'>titanic</span>[<span class='fl'>1</span>, -<span class='fl'>9</span>]
<span class='no'>shap_glm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='break_down_uncertainty.html'>shap</a></span>(<span class='no'>explain_titanic_glm</span>, <span class='no'>passanger</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>shap_glm</span>)</div><div class='img'><img src='describe-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>describe</span>(<span class='no'>shap_glm</span>,
         <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"the selected passanger survives with probability"</span>,
         <span class='kw'>display_shap</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
         <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Glm predicts, that the selected passanger survives with probability 0.058 which is lower than the average model prediction 0.324. For the selected instance model's prediction is lower, than for 94% of all observations.
#&gt; 
#&gt; The most important variable is class. It decreases the prediction by 0.122.
#&gt; The second most important variable is gender. It decreases the prediction by 0.105.
#&gt; The third most important variable is age. It decreases the prediction by 0.049.
#&gt; The average contribution of all the above variables is significant.
#&gt; 
#&gt; Other variables are with less importance. The contribution of all other variables is 0.01. </div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="author">
  <p>
    Developed by Przemyslaw Biecek, Alicja Gosiewska, Hubert Baniecki, Adam Izdebski.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


